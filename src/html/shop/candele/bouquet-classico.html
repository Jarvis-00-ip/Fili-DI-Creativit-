<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bouquet Classico - Fili di Creatività</title>
  <link rel="icon" type="image/x-icon" href="../../../../favicon.ico">
  <link rel="stylesheet" href="../../../css/common.css">
  <link rel="stylesheet" href="../../../css/style-base.css">
  <link rel="stylesheet" href="../../../css/mobile-menu.css">
  <link rel="stylesheet" href="../../../css/candele.css">
  <link rel="stylesheet" href="../../../css/product.css">
</head>

<body>
  <nav class="navbar"></nav>

  <main>

    <section class="product-hero" style="background-image: url('../../../../assets/img/candele/candele-collage.jpg')">
      <div class="hero-text">
        <h1>Bouquet Classico</h1>
        <p>Scopri il nostro prodotto artigianale unico ✨</p>
      </div>
      <a href="../../../html/candele.html" class="back-link">← Torna alle Candele</a>
    </section>

    <section class="product-container">
      <div class="product-slider-container" id="productSlider">
        <div class="product-slider-track" id="sliderTrack">
          <!-- Images will be injected here by JS -->
        </div>

        <button class="slider-btn prev" id="slidePrev" aria-label="Precedente">‹</button>
        <button class="slider-btn next" id="slideNext" aria-label="Successivo">›</button>

        <div class="slider-counter" id="sliderCounter">1 / 1</div>
      </div>
      <div class="product-info">
        <h2>Bouquet Classico</h2>
        <p class="price">25,00 €</p>
        <p>Bouquet Classico realizzata a mano, personalizzabile su richiesta (colori e fragranze).</p>

        <!-- STESSO STILE DEL PULSANTE ACQUISTA -->
        <a class="snipcart-add-item"
          href="mailto:lauracaprotti2000@gmail.com?subject=Informazioni%20Bouquet%20Classico">
          ✉️ Richiedi informazioni
        </a>

      </div>
    </section>
  </main>

  <div id="footer-placeholder"></div>
  <script src="../../../js/common.js"></script>

  <!-- Product Slider Script -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Image Configuration
      // Base path for images
      const basePath = "../../../../assets/img/bouquet/";

      // List of images (explicitly excluding "cemento")
      const images = [
        "Bouquet rosa.jpg",
        // Generating bouquet-gallery-1 to 26
        ...Array.from({ length: 26 }, (_, i) => `bouquet-gallery-${i + 1}.jpeg`)
      ];

      const track = document.getElementById('sliderTrack');
      const counterContainer = document.getElementById('sliderCounter');
      const prevBtn = document.getElementById('slidePrev');
      const nextBtn = document.getElementById('slideNext');

      let currentIndex = 0;

      // Initialize Slider
      function initSlider() {
        // Create Slides
        images.forEach((img, index) => {
          const slide = document.createElement('img');
          slide.src = basePath + img;
          slide.alt = `Bouquet Classico - Foto ${index + 1}`;
          slide.classList.add('product-slide');
          slide.loading = index === 0 ? "eager" : "lazy"; // Optimize loading
          track.appendChild(slide);

          // Create Dot - REMOVED for Counter
        });

        updateCounter();
      }

      function updateCounter() {
        if (counterContainer) {
          counterContainer.textContent = `${currentIndex + 1} / ${images.length}`;
        }
      }

      function goToSlide(index) {
        if (index < 0) index = images.length - 1;
        if (index >= images.length) index = 0;

        currentIndex = index;

        // Update Track
        track.style.transform = `translateX(-${currentIndex * 100}%)`;

        // Update Counter
        updateCounter();
      }

      // Event Listeners
      prevBtn.addEventListener('click', () => goToSlide(currentIndex - 1));
      nextBtn.addEventListener('click', () => goToSlide(currentIndex + 1));

      // Swipe support for mobile
      let touchStartX = 0;
      let touchEndX = 0;

      track.addEventListener('touchstart', e => {
        touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });

      track.addEventListener('touchend', e => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
      }, { passive: true });

      function handleSwipe() {
        if (touchEndX < touchStartX - 50) nextBtn.click();
        if (touchEndX > touchStartX + 50) prevBtn.click();
      }

      // Start
      initSlider();
    });
  </script>
</body>

</html>